/**
 * PluginHandler - A basic handler for register and upgrade javascript plugins.
 * 
 * @author Alexandre Thebaldi <ahlechandre@gmail.com>
 */
var pluginHandler={PluginConfig:{},PluginConfigInternal:{},register:function(b){},upgrade:function(b){},upgradeAll:function(){},upgradeAllForce:function(){},destroy:function(b){},destroyAll:function(){},getAllRegistered:function(){},getAllUpgraded:function(){},isRegistered:function(b){},isUpgraded:function(b){}},pluginHandler=function(){var b=[],d=[],f=function(a){var c={};a.callback();a.isUpgraded=!0;for(var b=0;b<d.length;b++)if(d[b].plugin===a.plugin)return;c.plugin=a.plugin;c.callback=a.callback;
c.upgradeable=a.upgradeable;d.push(c)},g=function(a){var c=b[a].plugin;if(b[a].isUpgraded)for(var e=0;e<d.length;e++)if(d[e].plugin===c){d.splice(e,1);break}b.splice(a,1)};return{register:function(a){var c={};if("undefined"===typeof a||"object"!==typeof a)console.error("Please, register a valid plugin.");else if("string"!==typeof a.plugin)console.error("Please, register a valid plugin name.");else if("function"!==typeof a.callback)console.error("Please, register a valid function as plugin callback.");
else{c.plugin=a.plugin;c.callback=a.callback;c.upgradeable="undefined"===typeof a.upgradeable||1==a.upgradeable?!0:!1;c.isUpgraded=!1;for(a=0;a<b.length;a++)if(b[a].plugin===c.plugin)throw Error("The "+c.plugin+" plugin is already registered.");b.push(c)}},upgrade:function(a){for(var c=0;c<b.length;c++)if(b[c].plugin===a){f(b[c]);break}},upgradeAll:function(){for(var a=0;a<b.length;a++)(b[a].upgradeable||!b[a].upgradeable&&!b[a].isUpgraded)&&f(b[a])},upgradeAllForce:function(){for(var a=0;a<b.length;a++)f(b[a])},
getAllRegistered:function(){return b},getAllUpgraded:function(){return d},isRegistered:function(a){for(var c=!1,e=0;e<b.length;e++)if(b[e].plugin===a){c=!0;break}return c},isUpgraded:function(a){for(var c=!1,b=0;b<d.length;b++)if(d[b].plugin===a){c=!0;break}return c},destroy:function(a){for(var c=0;c<b.length;c++)if(b[c].plugin===a){g(c);break}},destroyAll:function(){for(var a=b.length,c=0;c<a;c++)g(0)}}}();window.pluginHandler=pluginHandler;window.addEventListener("load",function(){pluginHandler.upgradeAll()});